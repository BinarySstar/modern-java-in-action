## 4.3 스트림과 컬렉션
스트림과 컬렉션 모두 연속된 요소 형식의 값을 저장하는 자료구조의 인터페이스를 제공한다. 

이 둘의 차이점은 계산이 되는 시점에서 차이가 있다.
- 컬렉션 : 현재 자료구조가 포함하는 모든 값을 메모리에 저장하는 자료구조이다. 즉, 컬렉션의 모든 요소는 컬렉션에 추가되기 전에 계산되어야 한다.
- 스트림 : 요청할 때만 요소를 계산하는 고정된 자료구조이다.

### 딱 한 번만 탐색할 수 있다.
스트림은 한 번만 탐색할 수 있다. 한 번 탐색한 요소를 다시 탐색하려면 초기 데이터 소스에서 새로운 스트림을 만들어야 한다.
```Java
List<String> title = Arrays.asList("JAVA8","In","Action");
Stream<String> s = title.stream();
s.forEach(System.out::println);  
s.forEach(System.out::println);  //안됨
```

### 외부 반복과 내부 반복
- **외부 반복** : `for-each` 사용 등 컬렉션 인터페이스를 사용하려면 사용자가 직접 요소를 반복한다. 명시적으로 컬렉션 항목을 하나씩 가져와서 처리한다.
```Java
List<String> names = new ArrayList<>();
for(Dish dish : menu){
  names.add(dish.getName());
}
```
- **내부 반복** : 스트림 라이브러리는 반복을 알아서 처리하고 결과 스트림값을 저장해준다.
```Java
List<String> names = menu.stream().map(Dish::getName).collect(toList());
```

외부 반복에 비해 내부 반복이 더 좋은 이유는 작업을 투명하게 병렬로 처리하거나 더 최적화된 다양한 순서로 처리할 수 있다.

`for-each`를 이용하는 외부 반복에서는 병렬성을 **스스로 관리**해야 한다. 이 말은 프로그래머가 병렬성을 포기하든지 아니면 `synchronized`를 사용하는 매우 힘든 길을 걷는다는 뜻이다. 반면 스트림 라이브러리의 내부 반복은 데이터 표현과 하드웨어를 활요한 병렬성 구현을 자동으로 선택한다.
